{
  "version": "3.0.0",
  "metadata": {
    "id": "code-spring",
    "name": "Spring Boot Backend",
    "kind": "code",
    "layers": [
      "backend",
      "cicd"
    ],
    "type": "spring",
    "description": "Bare minimum Spring Boot REST API skeleton",
    "version": "1.0.0",
    "author": "Genesis Team",
    "tags": [
      "spring",
      "java",
      "backend",
      "rest-api"
    ],
    "providers": [
      "aws"
    ],
    "providesFragments": {
      "backend-api": {
        "mode": "warn"
      }
    },
    "onWarn": {
      "message": "Multiple backend frameworks selected. This is unusual but allowed if you need multiple API services."
    }
  },
  "scaffoldConfigTemplate": [
    {
      "key": "javaVersion",
      "label": "Java Version",
      "type": "select",
      "options": ["17", "21"],
      "optionNotes": {
        "17": { "notes": "LTS - broad compatibility" },
        "21": { "notes": "Latest LTS - recommended" }
      },
      "default": "21",
      "required": true,
      "description": "Java language version for compilation",
      "category": "build"
    },
    {
      "key": "springBootVersion",
      "label": "Spring Boot Version",
      "type": "select",
      "options": ["3.4.1", "3.5.3"],
      "optionNotes": {
        "3.4.1": { "notes": "Stable" },
        "3.5.3": { "notes": "Latest - recommended" }
      },
      "default": "3.5.3",
      "required": true,
      "description": "Spring Boot platform version",
      "category": "build"
    },
    {
      "key": "buildTool",
      "label": "Build Tool",
      "type": "select",
      "options": ["gradle", "maven"],
      "optionNotes": {
        "gradle": { "notes": "Fast, flexible - recommended" },
        "maven": { "notes": "Convention-based, verbose XML" }
      },
      "default": "gradle",
      "required": true,
      "description": "Build tool (Gradle or Maven)",
      "category": "build"
    },
    {
      "key": "packaging",
      "label": "Packaging",
      "type": "select",
      "options": ["jar", "war"],
      "optionNotes": {
        "jar": { "notes": "Standalone executable - recommended" },
        "war": { "notes": "For external servlet containers" }
      },
      "default": "jar",
      "required": true,
      "description": "Application packaging type",
      "category": "build"
    }
  ],
  "dependencies": {
    "gradle": [
      "implementation 'org.springframework.boot:spring-boot-starter-web'",
      "implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.4'",
      "testImplementation 'org.springframework.boot:spring-boot-starter-test'",
      "testRuntimeOnly 'com.h2database:h2'"
    ],
    "maven": [
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-web</artifactId></dependency>",
      "<dependency><groupId>org.springdoc</groupId><artifactId>springdoc-openapi-starter-webmvc-ui</artifactId><version>2.8.4</version></dependency>",
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-test</artifactId><scope>test</scope></dependency>",
      "<dependency><groupId>com.h2database</groupId><artifactId>h2</artifactId><scope>test</scope></dependency>"
    ]
  },
  "runtimeConfigFiles": {
    "default": "backend/src/main/resources/application.yaml",
    "env": "backend/src/main/resources/application-{{env}}.yaml"
  },
  "runtimeConfigTemplate": [
    {
      "key": "APP_NAME",
      "description": "Application name",
      "example": "{{projectName}}",
      "default": "runtime",
      "required": false,
      "secret": false,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": true
    },
    {
      "key": "APP_ENV_HOST",
      "description": "Backend API base URL",
      "example": "https://{{projectName}}-api{{envSuffix}}.{{domain}}",
      "default": "runtime",
      "required": true,
      "secret": false,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": false
    },
    {
      "key": "APP_ENV_UI",
      "description": "Frontend application URL",
      "example": "https://{{projectName}}{{envSuffix}}.{{domain}}",
      "default": "runtime",
      "required": true,
      "secret": false,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": false
    }
  ],
  "generation": {
    "files": {
      "remove": [
        "src/main/resources/application.properties",
        "settings.gradle"
      ]
    },
    "layers": {
      "backend": {},
      "cicd": {}
    }
  },
  "transformations": {
    "replacements": [
      {
        "files": [
          "{{backendModule.moduleId}}/build.gradle"
        ],
        "operations": [
          {
            "find": "version = '0.0.1-SNAPSHOT'",
            "replace": "version = project.hasProperty('versionArg') ? versionArg : '0.0.1-SNAPSHOT'"
          }
        ]
      }
    ]
  },
  "gitIgnore": {
    "spring": [
      "# Local development",
      ".pids/",
      ".logs/",
      "",
      "# Java/Gradle",
      "build/",
      ".gradle/",
      "*.class",
      "*.jar",
      "*.war",
      "*.ear",
      "",
      "# IDE files",
      ".idea/",
      "*.iml",
      ".vscode/",
      "*.suo",
      "*.ntvs*",
      "*.njsproj",
      "*.sln",
      "*.sw?",
      "",
      "# OS files",
      ".DS_Store",
      "Thumbs.db",
      "",
      "# Logs",
      "logs/",
      "*.log"
    ]
  }
}