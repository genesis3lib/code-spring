{
  "version": "3.0.0",

  "metadata": {
    "id": "code-spring",
    "name": "Spring Boot Backend",
    "kind": "code",
    "layers": ["backend"],
    "type": "spring",
    "description": "Bare minimum Spring Boot REST API skeleton",
    "version": "1.0.0",
    "author": "Genesis Team",
    "tags": ["spring", "java", "backend", "rest-api"]
  },

  "scaffoldConfigTemplate": [
    {
      "key": "javaVersion",
      "label": "Java Version",
      "type": "select",
      "options": ["17", "21"],
      "default": "21",
      "required": true,
      "description": "Java language version for compilation",
      "category": "build"
    },
    {
      "key": "springBootVersion",
      "label": "Spring Boot Version",
      "type": "select",
      "options": ["3.4.1", "3.5.3"],
      "default": "3.5.3",
      "required": true,
      "description": "Spring Boot platform version",
      "category": "build"
    },
    {
      "key": "buildTool",
      "label": "Build Tool",
      "type": "select",
      "options": ["gradle", "maven"],
      "default": "gradle",
      "required": true,
      "description": "Build tool (Gradle or Maven)",
      "category": "build"
    },
    {
      "key": "packaging",
      "label": "Packaging",
      "type": "select",
      "options": ["jar", "war"],
      "default": "jar",
      "required": true,
      "description": "Application packaging type",
      "category": "build"
    }
  ],

  "dependencies": {
    "gradle": [
      "implementation 'org.springframework.boot:spring-boot-starter-web'",
      "testImplementation 'org.springframework.boot:spring-boot-starter-test'"
    ],
    "maven": [
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-web</artifactId></dependency>",
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-test</artifactId><scope>test</scope></dependency>"
    ]
  },

  "runtimeConfigFiles": {
    "default": "backend/src/main/resources/application.yaml",
    "env": "backend/src/main/resources/application-{{env}}.yaml"
  },

  "runtimeConfigTemplate": [
    {
      "key": "SPRING_APPLICATION_NAME",
      "description": "Spring application name",
      "example": "{{projectName}}-api",
      "required": true,
      "secret": false,
      "targets": ["backend"]
    },
    {
      "key": "SPRING_PROFILES_ACTIVE",
      "description": "Active Spring profile (dev/staging/prod)",
      "example": "{{currentEnv}}",
      "required": true,
      "secret": false,
      "targets": ["backend"]
    },
    {
      "key": "SERVER_PORT",
      "description": "Server HTTP port",
      "example": "8080",
      "required": true,
      "secret": false,
      "targets": ["backend"]
    },
    {
      "key": "SPRING_DATASOURCE_URL",
      "description": "Database JDBC URL (loaded from AWS Secrets Manager)",
      "example": "jdbc:postgresql://localhost:5432/{{projectName}}",
      "required": false,
      "secret": true,
      "targets": ["backend"]
    },
    {
      "key": "SPRING_DATASOURCE_USERNAME",
      "description": "Database username (loaded from AWS Secrets Manager)",
      "example": "dbuser",
      "required": false,
      "secret": true,
      "targets": ["backend"]
    },
    {
      "key": "SPRING_DATASOURCE_PASSWORD",
      "description": "Database password (loaded from AWS Secrets Manager)",
      "example": "changeme",
      "required": false,
      "secret": true,
      "targets": ["backend"]
    },
    {
      "key": "LOG_LEVEL_APP",
      "description": "Application logging level",
      "example": "{{#isDevEnv}}DEBUG{{/isDevEnv}}{{#isProdEnv}}WARN{{/isProdEnv}}{{^isDevEnv}}{{^isProdEnv}}INFO{{/isProdEnv}}{{/isDevEnv}}",
      "required": false,
      "secret": false,
      "targets": ["backend"]
    },
    {
      "key": "LOG_LEVEL_SPRING",
      "description": "Spring Framework logging level",
      "example": "{{#isDevEnv}}INFO{{/isDevEnv}}{{^isDevEnv}}WARN{{/isDevEnv}}",
      "required": false,
      "secret": false,
      "targets": ["backend"]
    },
    {
      "key": "LOG_LEVEL_WEB",
      "description": "Spring Web logging level",
      "example": "{{#isDevEnv}}DEBUG{{/isDevEnv}}{{^isDevEnv}}INFO{{/isDevEnv}}",
      "required": false,
      "secret": false,
      "targets": ["backend"]
    }
  ],

  "generation": {
    "files": {
      "remove": [
        "src/main/resources/application.properties"
      ]
    },
    "layers": {
      "backend": {}
    }
  }
}
